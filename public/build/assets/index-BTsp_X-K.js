import{r,j as t}from"./app-qyhzk3_W.js";import{S as y,M as S,C as g}from"./chatbar-DFm-f07j.js";/* empty css            */function M(){const[d,s]=r.useState([]),[h,c]=r.useState([]),[x,i]=r.useState(!1);r.useEffect(()=>{m()},[]);const m=async()=>{try{const a=await(await fetch("/api/chat/history")).json();c(a)}catch(e){console.error("Error fetching chat history:",e),c(["Dampak AI pada Dosen","Metodologi Kualitatif Kom","Lorem Ipsum Dolor Sit Am","Lorem Ipsum Dolor Sit Am","Lorem Ipsum Dolor Sit Am","Lorem Ipsum Dolor Sit Am"])}},p=async()=>{s([]);try{await fetch("/api/chat/new",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}})}catch(e){console.error("Error creating new chat:",e)}},f=async e=>{const a={sender:"user",text:e};s(o=>[...o,a]),i(!0);try{const n={sender:"ai",text:(await(await fetch("/api/chat/send",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({message:e})})).json()).response||"Sorry, I could not process your request."};s(u=>[...u,n])}catch(o){console.error("Error sending message:",o);const l={sender:"ai",text:"Sorry, there was an error connecting to the server."};s(n=>[...n,l])}finally{i(!1)}};return t.jsxs("div",{className:"flex h-screen overflow-hidden bg-gray-50",children:[t.jsx(y,{chatHistory:h,onNewChat:p}),t.jsxs("div",{className:"flex-1 flex flex-col relative",children:[t.jsx(S,{messages:d}),t.jsx(g,{onSendMessage:f})]})]})}export{M as default};
